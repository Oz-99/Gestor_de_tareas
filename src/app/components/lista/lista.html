<div class="task-list-container">
  <h2>ğŸ“ Mis Tareas</h2>
  <ul class="task-list">
    <li
      *ngFor="let tarea of tareas"
      class="task-item"
      [ngClass]="{ completed: tarea.estado === 'completada' }"
    >
      <!-- Encabezado (tÃ­tulo + flecha + botones) -->
      <div class="task-info">
        <span class="task-title" (click)="toggleDescripcion(tarea)">
          {{ tarea.estado === 'completada' ? 'âœ…' : 'ğŸ“Œ' }} {{ tarea.titulo }}
          <span class="toggle-arrow">
            {{ tarea.expandida ? 'ğŸ”½' : 'â–¶ï¸' }}
          </span>
        </span>

        <!-- Botones a la derecha -->
        <div class="actions">
          <button class="done" (click)="marcarCompletada(tarea)">âœ”</button>
          <button class="edit" (click)="editarTarea(tarea)">âœ</button>
          <button class="delete" (click)="eliminarTarea(tarea._id!)">ğŸ—‘</button>
        </div>
      </div>

      <!-- AcordeÃ³n debajo -->
      <div class="task-detalle" *ngIf="tarea.expandida">
        <p class="task-desc">â¡ï¸ {{ tarea.descripcion }}</p>
        <p
          class="task-prioridad"
          [ngClass]="{
            'prioridad-alta': tarea.prioridad === 'Alta',
            'prioridad-media': tarea.prioridad === 'Media',
            'prioridad-baja': tarea.prioridad === 'Baja'
          }"
        >
          ğŸ”¥ Prioridad: {{ tarea.prioridad }}
        </p>
        <p
          class="task-fecha"
          *ngIf="tarea.fechaLimite"
          [ngClass]="{ 'fecha-vencida': isVencida(tarea.fechaLimite) }"
        >
          ğŸ“… Fecha lÃ­mite: {{ tarea.fechaLimite | date : 'dd/MM/yyyy' }}
        </p>
      </div>
    </li>
  </ul>
</div>
